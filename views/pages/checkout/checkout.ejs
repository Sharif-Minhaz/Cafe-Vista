<%- include("../../partials/head.ejs") %>
</head>
<body>
    <%- include("../../partials/alert.ejs") %>
    <%- include("../../partials/header.ejs") %>
        <section id="checkout">
            <div class="main-wrapper">
                <form class="checkout-box" action="/" method="post">
                    <div class="left">
                        <h3>Your Shopping Cart</h3>
                        <div class="carted-product">
                            <img src="<%= productDetails.imageMenu %> " alt="product-img">
                            <div class="inner-cart-box">
                                <input type="text" name="product-name" id="product-name" value="<%= productDetails.productName %>" readonly>
                                <div class="inc-dec-loop">
                                    <div class="inc-dec-cart">
                                        <span> - </span>
                                        <input type="number" value="<%= productDetails.productCount %>" readonly>
                                        <span> + </span>
                                    </div>
                                    <input type="text" value="<%= productDetails.productPrice %>" id="price" readonly>
                                </div>
                            </div>
                            <div class="remove-product">
                                <a href="/menu/all"><i class="bi bi-x-lg"></i></a>
                            </div>
                        </div>
                        <input type="submit" value="Complete Purchase">
                    </div>
                    <div class="right">
                        <h3>Your Card Details</h3>
                        <small style="margin-top: 0px;">Card Type</small>
                        <div class="cards">
                            <img class="selected-card" src="/images/visa.png" alt="visa" title="visa">
                            <img src="/images/mastercard.png" alt="mastercard" title="mastercard">
                            <img src="/images/paypal.png" alt="paypal" title="paypal">
                        </div>
                        <small>Name on Card</small>
                        <input name="cardName" type="text" required>
                        <small>Card Number</small>
                        <input name="cardNumber" type="text" required>
                        <div class="expiry-cvv">
                            <div class="expiry">
                                <small>Expiry Date</small>
                                <input name="expireDate" type="date" required>
                            </div>
                            <div class="cvv">
                                <small>CVV</small>
                                <input name="cvv" type="text" required>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </section>

    </header>

    <%- include("../../partials/footer.ejs") %>
    <script>
        const cards = document.querySelectorAll(".right .cards img");

        cards[0].addEventListener("click", function() {
            activeDeactiveCard(0, 1, 2);
            enableDisableInputBox(false);

        })
        cards[1].addEventListener("click", function() {
            activeDeactiveCard(1, 0, 2);
            enableDisableInputBox(false);

        })
        cards[2].addEventListener("click", function() {
            activeDeactiveCard(2, 0, 1);
            enableDisableInputBox(true);
        })

        function activeDeactiveCard(active, deactive1, deactive2) {
            cards[deactive1].classList.remove("selected-card");
            cards[deactive2].classList.remove("selected-card");
            cards[active].classList.add("selected-card");
        }

        const menuForm = document.getElementsByClassName("checkout-box")[0];

        function enableDisableInputBox(bool) {
            bool && menuForm.reset();
            document.querySelector("input[name='cardName']").disabled = bool;
            document.querySelector("input[name='cardNumber']").disabled = bool;
            document.querySelector("input[name='expireDate']").disabled = bool;
            document.querySelector("input[name='cvv']").disabled = bool;
        }
        
    </script>
</body>
</html>